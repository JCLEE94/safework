apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: argocd

resources:
  - application.yaml
  - image-updater-configmap.yaml
  # Secret은 수동으로 생성 필요 (GitHub Token 포함)
  # - image-updater-secret.yaml

# ArgoCD 및 Image Updater 설정을 위한 패치
patches:
  - target:
      kind: Application
      name: safework
    patch: |-
      - op: add
        path: /metadata/annotations/argocd-image-updater.argoproj.io~1force-update
        value: "true"